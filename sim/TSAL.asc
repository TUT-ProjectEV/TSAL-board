Version 4
SHEET 1 1240 1300
WIRE -768 -224 -1024 -224
WIRE -640 -224 -768 -224
WIRE -768 -192 -768 -224
WIRE -640 -192 -640 -224
WIRE -1024 -176 -1024 -224
WIRE -1024 -176 -1152 -176
WIRE 352 -144 352 -176
WIRE 976 -144 352 -144
WIRE 352 -112 352 -144
WIRE 944 -112 448 -112
WIRE -768 -80 -768 -112
WIRE -640 -80 -640 -112
WIRE 560 -32 528 -32
WIRE 352 0 352 -32
WIRE 448 0 448 -112
WIRE 448 0 352 0
WIRE 528 0 528 -32
WIRE -768 32 -768 0
WIRE -640 32 -640 0
WIRE 352 32 352 0
WIRE 560 32 352 32
WIRE 976 32 976 -144
WIRE 976 32 784 32
WIRE 352 64 352 32
WIRE -1152 80 -1152 -176
WIRE -1024 80 -1024 -176
WIRE 944 96 944 -112
WIRE 944 96 784 96
WIRE -768 144 -768 112
WIRE -640 144 -640 112
WIRE 352 160 352 128
WIRE 528 160 480 160
WIRE 560 160 528 160
WIRE 816 160 784 160
WIRE -1152 192 -1152 160
WIRE -1024 192 -1024 160
WIRE 816 192 816 160
WIRE -768 256 -768 224
WIRE -640 256 -640 224
WIRE 80 272 80 240
WIRE 64 288 -96 288
WIRE 816 288 816 256
WIRE -1152 304 -1152 272
WIRE -1024 304 -1024 272
WIRE 272 304 128 304
WIRE 480 304 480 160
WIRE 480 304 272 304
WIRE 64 320 32 320
WIRE -768 368 -768 336
WIRE -672 368 -768 368
WIRE -640 368 -640 336
WIRE -640 368 -672 368
WIRE -544 368 -640 368
WIRE -320 368 -320 256
WIRE -320 368 -352 368
WIRE -96 368 -96 288
WIRE -96 368 -320 368
WIRE 80 368 80 336
WIRE -640 384 -640 368
WIRE 1024 384 1024 352
WIRE -848 400 -944 400
WIRE -704 400 -784 400
WIRE -1152 416 -1152 384
WIRE -1024 416 -1024 384
WIRE -944 464 -944 400
WIRE -912 464 -944 464
WIRE -800 464 -832 464
WIRE -704 464 -704 400
WIRE -704 464 -736 464
WIRE -640 464 -704 464
WIRE -576 464 -640 464
WIRE -544 464 -576 464
WIRE -320 464 -352 464
WIRE -64 464 -64 432
WIRE 32 464 32 320
WIRE 32 464 -64 464
WIRE 128 464 32 464
WIRE 272 464 272 304
WIRE 272 464 208 464
WIRE 1024 480 1024 448
WIRE -576 496 -576 464
WIRE -320 496 -320 464
WIRE -64 496 -64 464
WIRE -1152 528 -1152 496
WIRE -1024 528 -1024 496
WIRE -1024 528 -1152 528
WIRE -944 528 -944 464
WIRE -944 528 -1024 528
WIRE -736 528 -944 528
WIRE -608 528 -736 528
WIRE -1152 560 -1152 528
WIRE -1024 560 -1024 528
WIRE -672 560 -672 368
WIRE 736 560 736 528
WIRE 864 560 736 560
WIRE 976 560 944 560
WIRE -576 592 -576 560
WIRE 736 592 736 560
WIRE -64 608 -64 576
WIRE 1024 608 1024 576
WIRE -1152 656 -1152 624
WIRE -672 656 -672 624
WIRE -1024 672 -1024 640
WIRE 480 672 480 304
WIRE 512 672 480 672
WIRE 624 672 592 672
WIRE 688 672 624 672
WIRE 624 704 624 672
WIRE 736 720 736 688
WIRE -1024 800 -1024 752
WIRE 192 816 192 784
WIRE 624 816 624 784
WIRE 192 912 192 880
WIRE 0 992 -48 992
WIRE 112 992 80 992
WIRE 144 992 112 992
WIRE 112 1024 112 992
WIRE 112 1120 112 1104
WIRE 192 1120 192 1008
WIRE 192 1120 112 1120
WIRE 192 1136 192 1120
FLAG 528 0 0
FLAG 352 160 0
FLAG 816 288 0
FLAG -336 -80 VDD
FLAG -336 0 0
FLAG 352 -256 VDD
FLAG 560 96 VOUT
FLAG 784 -32 VDD
FLAG -320 176 VDD
FLAG -320 496 0
FLAG -1024 800 0
FLAG -576 592 0
FLAG -1632 0 0
FLAG -1632 160 TS+
FLAG 528 160 RST
FLAG -672 656 0
FLAG -1152 656 0
FLAG 1024 272 VDD
FLAG 1024 608 0
FLAG 192 704 VDD
FLAG 192 1136 0
FLAG -48 992 VOUT
FLAG -1632 -80 VIN
FLAG -1632 240 0
FLAG -64 352 VDD
FLAG -736 528 REF
FLAG -1856 400 0
FLAG -1856 320 NOISE1
FLAG 80 368 0
FLAG 80 240 VDD
FLAG -64 608 0
FLAG -1856 576 NOISE2
FLAG -1856 656 0
FLAG 736 448 VDD
FLAG 736 720 0
FLAG 624 816 0
FLAG -1152 -176 VIN
SYMBOL Misc\\NE555 672 64 R0
SYMATTR InstName U1
SYMBOL res 336 -272 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 336 -128 R0
SYMATTR InstName R2
SYMATTR Value 180k
SYMBOL cap 800 192 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL voltage -336 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL Optos\\TLP291_SE -448 416 R0
SYMATTR InstName U2
SYMBOL res -336 160 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -1040 64 R0
SYMATTR InstName R6
SYMATTR Value 220k
SYMBOL res -1040 176 R0
SYMATTR InstName R7
SYMATTR Value 220k
SYMBOL res -1040 288 R0
SYMATTR InstName R8
SYMATTR Value 220k
SYMBOL res -1040 400 R0
SYMATTR InstName R9
SYMATTR Value 220k
SYMBOL References\\TL431 -576 528 M0
SYMATTR InstName U3
SYMBOL res -1040 544 R0
SYMATTR InstName R10
SYMATTR Value 17.8k
SYMBOL res -1168 64 R0
SYMATTR InstName R13
SYMATTR Value 220k
SYMBOL res -1168 176 R0
SYMATTR InstName R14
SYMATTR Value 220k
SYMBOL res -1168 288 R0
SYMATTR InstName R15
SYMATTR Value 220k
SYMBOL res -1168 400 R0
SYMATTR InstName R16
SYMATTR Value 220k
SYMBOL res -656 -208 R0
SYMATTR InstName R17
SYMATTR Value 15k
SYMBOL res -656 -96 R0
SYMATTR InstName R18
SYMATTR Value 15k
SYMBOL res -656 16 R0
SYMATTR InstName R19
SYMATTR Value 15k
SYMBOL res -656 128 R0
SYMATTR InstName R20
SYMATTR Value 15k
SYMBOL res -656 240 R0
SYMATTR InstName R21
SYMATTR Value 15k
SYMBOL res -784 -208 R0
SYMATTR InstName R22
SYMATTR Value 15k
SYMBOL res -784 -96 R0
SYMATTR InstName R23
SYMATTR Value 15k
SYMBOL res -784 16 R0
SYMATTR InstName R24
SYMATTR Value 15k
SYMBOL res -784 128 R0
SYMATTR InstName R25
SYMATTR Value 15k
SYMBOL res -784 240 R0
SYMATTR InstName R26
SYMATTR Value 15k
SYMBOL voltage -1632 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PWL(0.01 0 0.2 400 0.4 400 1 0)
SYMBOL res -656 368 R0
SYMATTR InstName R27
SYMATTR Value 10k
SYMBOL res -1040 656 R0
SYMATTR InstName R4
SYMATTR Value 4.3k
SYMBOL zener -656 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value UFZV24B
SYMBOL zener -1136 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value UFZV24B
SYMBOL cap 336 64 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL nmos 976 480 R0
SYMATTR InstName M2
SYMATTR Value 2N7002
SYMBOL res 960 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL res 1040 368 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R28
SYMATTR Value 10k
SYMBOL LED 1008 384 R0
SYMATTR InstName D3
SYMBOL nmos 144 912 R0
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL res 96 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 100
SYMBOL res 96 1008 R0
SYMATTR InstName R30
SYMATTR Value 1Meg
SYMBOL res 208 800 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R31
SYMATTR Value 10k
SYMBOL LED 176 816 R0
SYMATTR InstName D4
SYMBOL bv -1632 144 R0
SYMATTR InstName B1
SYMATTR Value V=V(VIN)+V(NOISE1)+V(NOISE2)
SYMBOL res -80 336 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL cap -784 384 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100p
SYMBOL res -816 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL cap -736 448 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL bv -1856 304 R0
SYMATTR InstName B2
SYMATTR Value V=10*SIN(2*pi*1k*time)+10*SIN(2*pi*20k*time)
SYMBOL res -80 480 R0
SYMATTR InstName R32
SYMATTR Value 100k
SYMBOL res 224 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 51k
SYMBOL bv -1856 560 R0
SYMATTR InstName B3
SYMATTR Value V=5*SIN(2*pi*100k*time)
SYMBOL OpAmps\\ADA4099-1 96 304 R0
SYMATTR InstName U5
SYMBOL nmos 688 592 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL res 608 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 100
SYMBOL res 752 544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R35
SYMATTR Value 100k
SYMBOL res 608 688 R0
SYMATTR InstName R36
SYMATTR Value 1Meg
TEXT -512 -224 Left 2 !.tran 1 startup
